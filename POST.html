<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Добавить заявку</title>
</head>
<body>
    <div>
        <a href="GET.html">Получить заявки</a>
        <a href="POST.html">Добавить заявку</a>
        
    </div>

    <form id="add-order-form">
        <label for="number">Номер заявки:</label>
        <input type="number" id="number" name="number"><br><br>

        <label for="client">Клиент:</label>
        <input type="text" id="client" name="client"><br><br>

        <label for="phone">Телефон:</label>
        <input type="text" id="phone" name="phone"><br><br>

        <label for="adres">Адрес:</label>
        <input type="text" id="adres" name="adres"><br><br>

        <label for="apartmens">Номер апартаментов:</label>
        <input type="text" id="apartmens" name="apartmens"><br><br>

        <label for="wishes">Пожелания:</label>
        <textarea id="wishes" name="wishes"></textarea><br><br>

        <label for="check_in">Дата заезда:</label>
        <input type="date" id="check_in" name="check_in"><br><br>

        <label for="departure">Дата выезда:</label>
        <input type="date" id="departure" name="departure"><br><br>

        <label for="admin">Администратор:</label>
        <input type="text" id="admin" name="admin"><br><br>

        <input type="submit" value="Добавить заявку">
    </form>

    <script>
        const addOrderForm = document.getElementById('add-order-form');

        addOrderForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const number = document.getElementById('number').value;
            const client = document.getElementById('client').value;
            const phone = document.getElementById('phone').value;
            const adres = document.getElementById('adres').value;
            const apartmens = document.getElementById('apartmens').value;
            const wishes = document.getElementById('wishes').value;
            const check_in = document.getElementById('check_in').value; 
            const departure = document.getElementById('departure').value; 
            const admin = document.getElementById('admin').value;

            const newOrder = {
                number,
                client,
                phone,
                adres,
                apartmens,
                wishes,
                check_in, 
                departure, 
                admin,
                status: null 
            };

            
                const response = await fetch("http://localhost:7777/ord", {
                    method: "POST",
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(newOrder)
                });

                if (response.ok) {
                    window.location.href = "GET.html"; 
                } 
        });
        
        
    </script>
</body>
</html>